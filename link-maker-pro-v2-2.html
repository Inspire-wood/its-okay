<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Link Maker PRO v2.2 — Inspire Wood</title>
  <meta name="description" content="문장 → 링크, 발음/번역, 짧은 슬러그, 정적 리디렉트 파일 생성.">
  <style>
    :root{--ink:#0f172a;--muted:#64748b;--line:#e5e7eb;--card:#ffffff}
    html,body{margin:0;padding:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Helvetica,Arial,sans-serif;color:var(--ink)}
    body{
      background:
        radial-gradient(1200px 560px at 8% -12%, #fff6ed 0%, rgba(255,246,237,0) 60%),
        radial-gradient(900px 520px at 92% 110%, #ffe5cf 0%, rgba(255,229,207,0) 55%),
        linear-gradient(180deg, #fff1e6 0%, #fde3d3 100%);
    }
    .wrap{max-width:980px;margin:40px auto;padding:0 20px}
    h1{font-size:clamp(24px,4.4vw,36px);margin:0 0 8px}
    .lead{color:var(--muted);margin:0 0 18px}
    .card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:16px;margin:12px 0;box-shadow:0 8px 24px rgba(2,6,23,.06)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:720px){.row{grid-template-columns:1fr}}
    label{font-size:12px;color:#475569;margin:4px 0;display:block}
    .input,.select,textarea{width:100%;border:1px solid var(--line);border-radius:12px;padding:10px 12px;font-size:14px;background:#fff}
    textarea{min-height:100px}
    .btn{border:1px solid var(--line);background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer;font-weight:800}
    .btn:hover{border-color:#cbd5e1}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .out{border:1px dashed #d1d5db;border-radius:12px;padding:12px;background:#f8fafc;word-break:break-all}
    .muted{color:#94a3b8;font-size:12px}
    .section-title{font-weight:900;margin:4px 0 8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Link Maker PRO v2.2</h1>
    <p class="lead">문장을 링크로, 링크를 짧게. 정적 리디렉트 파일까지 한 번에 만들어 보세요.</p>

    <div class="card">
      <div class="section-title">1) 문장 → 한글사랑 링크 만들기</div>
      <div class="row">
        <div>
          <label>한글(ko)</label>
          <input id="ko" class="input" placeholder="예) 감사해">
        </div>
        <div>
          <label>로마자(roman, 하이픈 표기)</label>
          <input id="roman" class="input" placeholder="예) gam-sa-hae">
        </div>
        <div>
          <label>영문(en)</label>
          <input id="en" class="input" placeholder="예) THANK YOU">
        </div>
        <div>
          <label>기본 페이지</label>
          <select id="base" class="select">
            <option value="/its-okay/">/its-okay/ (한글사랑)</option>
            <option value="/its-okay/healing/">/its-okay/healing/ (힐링메세지)</option>
          </select>
        </div>
      </div>
      <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
        <button id="buildUrl" class="btn">URL 생성</button>
        <button id="copyUrl" class="btn">URL 복사</button>
        <a id="openUrl" target="_blank" class="btn" href="#">새 창에서 열기</a>
      </div>
      <div id="urlOut" class="out mono" style="margin-top:10px"></div>
    </div>

    <div class="card">
      <div class="section-title">2) 단축 URL 만들기 (정적 리디렉트)</div>
      <div class="row">
        <div>
          <label>슬러그(slug) <span class="muted">/go/&lt;slug&gt;.html 로 배치</span></label>
          <div style="display:flex;gap:8px">
            <input id="slug" class="input" placeholder="예) ty">
            <button id="autoSlug" class="btn">자동 생성</button>
          </div>
          <p class="muted">Bitly처럼 짧게 쓰려면 <strong>글자수 2~4</strong> 추천. (Base62: 0-9a-zA-Z)</p>
        </div>
        <div>
          <label>리디렉트할 원본 URL</label>
          <input id="target" class="input mono" placeholder="위 1)에서 생성 후 자동 입력됩니다.">
        </div>
      </div>
      <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
        <button id="dlRedirect" class="btn">리디렉트 파일 다운로드</button>
        <button id="copyShort" class="btn">짧은 URL 복사</button>
      </div>
      <div id="shortOut" class="out mono" style="margin-top:10px"></div>
      <p class="muted">GitHub에 <code>/go/슬러그.html</code>로 업로드하면 <code>https://inspire-wood.github.io/go/슬러그</code> 로 접속됩니다. (확장자 숨김)</p>
    </div>

    <div class="card">
      <div class="section-title">3) 폰트 출처 자동 채우기</div>
      <div class="row">
        <div>
          <label>폰트 이름</label>
          <input id="fontName" class="input" placeholder="예) 안동엄마까투리체 / Andong Eomma Katuri">
        </div>
        <div>
          <label>출처(KR)</label>
          <textarea id="creditKr" class="input" placeholder="한국어 출처 문구"></textarea>
        </div>
        <div>
          <label>Credit (EN)</label>
          <textarea id="creditEn" class="input" placeholder="English credit text"></textarea>
        </div>
      </div>
      <p class="muted">폰트명을 입력하면 알려진 라이선스/출처 문구가 자동으로 채워집니다. 직접 수정도 가능해요.</p>
    </div>

    <p class="muted">© Inspire Wood — Link Maker PRO v2.2</p>
  </div>

  <script>
    // ========= 1) URL 생성 =========
    const $=s=>document.querySelector(s);
    const baseHost = 'https://inspire-wood.github.io';
    function buildUrl(){
      const base=$('#base').value;
      const ko=$('#ko').value.trim();
      const roman=$('#roman').value.trim();
      const en=$('#en').value.trim();
      const p=new URL(base, baseHost);
      if(base.endsWith('/healing/')){
        if(ko) p.searchParams.set('name', ko);
        p.searchParams.set('mode','daily');
      }else{
        if(ko) p.searchParams.set('ko', ko);
        if(roman) p.searchParams.set('roman', roman);
        if(en) p.searchParams.set('en', en);
      }
      $('#urlOut').textContent=p.toString();
      $('#openUrl').href=p.toString();
      $('#target').value=p.toString();
      return p.toString();
    }
    $('#buildUrl').onclick=buildUrl;
    $('#copyUrl').onclick=()=>{ const t=$('#urlOut').textContent; if(!t) return alert('먼저 URL 생성'); navigator.clipboard.writeText(t); };

    // ========= 2) 단축 URL (정적 리디렉트) =========
    const alphabet="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    function randSlug(n=3){ let s=''; for(let i=0;i<n;i++) s+=alphabet[Math.floor(Math.random()*alphabet.length)]; return s; }
    $('#autoSlug').onclick=()=>{ const len = 2 + Math.floor(Math.random()*3); $('#slug').value = randSlug(len); showShort(); };
    function shortUrl(){
      const s=$('#slug').value.trim(); if(!s) return '';
      return `${baseHost}/go/${encodeURIComponent(s)}`;
    }
    function redirectHtml(target){
      const esc = target.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
      return `<!doctype html><meta charset="utf-8"><meta http-equiv="refresh" content="0;url=${esc}"><link rel="canonical" href="${esc}"><title>Redirecting…</title>`;
    }
    function showShort(){ const s=shortUrl(); if(!s) return; $('#shortOut').textContent=s; }
    $('#slug').oninput=showShort;
    $('#dlRedirect').onclick=()=>{
      const s=$('#slug').value.trim(); if(!s) return alert('슬러그를 입력하세요.');
      const t=$('#target').value.trim()||buildUrl();
      if(!t) return alert('리디렉트 대상 URL이 필요합니다.');
      const blob=new Blob([redirectHtml(t)],{type:'text/html'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download=`${s}.html`; a.click();
      showShort();
    };
    $('#copyShort').onclick=()=>{ const s=shortUrl(); if(!s) return alert('슬러그를 입력하세요.'); navigator.clipboard.writeText(s); };

    // ========= 3) 폰트 출처 자동 =========
    const FONT_CREDITS = {
      "안동엄마까투리체": {
        kr: "출처: 안동엄마까투리체 — 안동시, 공유마당(한국저작권위원회), 공공누리 제1유형(출처표시).",
        en: "Font: Andong Eomma Katuri — Andong City, via Share-Madang (KOGL Type 1: Attribution)."
      },
      "Andong Eomma Katuri": {
        kr: "출처: 안동엄마까투리체 — 안동시, 공유마당(한국저작권위원회), 공공누리 제1유형(출처표시).",
        en: "Font: Andong Eomma Katuri — Andong City, via Share-Madang (KOGL Type 1: Attribution)."
      }
    };
    function tryFillCredit(){
      const name=$('#fontName').value.trim();
      const hit = FONT_CREDITS[name];
      if(hit){
        if(!$('#creditKr').value.trim()) $('#creditKr').value = hit.kr;
        if(!$('#creditEn').value.trim()) $('#creditEn').value = hit.en;
      }
    }
    $('#fontName').addEventListener('change', tryFillCredit);
    $('#fontName').addEventListener('blur', tryFillCredit);
  </script>
</body>
</html>
