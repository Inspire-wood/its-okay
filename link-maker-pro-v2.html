<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Link Maker PRO v2 — Vertical</title>
  <meta name="description" content="문장 → 링크, 짧은 슬러그, 정적 리디렉트, 폰트 출처 자동. (세로 레이아웃)">
  <style>
    :root{--ink:#0f172a;--muted:#64748b;--line:#e5e7eb;--card:#ffffff}
    html,body{margin:0;padding:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Helvetica,Arial,sans-serif;color:var(--ink);background:#fff7f0}
    .wrap{max-width:680px;margin:28px auto;padding:0 16px}
    h1{margin:0 0 6px;font-size:clamp(22px,4.4vw,32px)}
    .lead{margin:0 0 14px;color:var(--muted)}
    .card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:14px 14px 16px;margin:12px 0;box-shadow:0 6px 18px rgba(2,6,23,.06)}
    label{font-size:12px;color:#475569;margin:8px 0 6px;display:block}
    .input,.select,textarea{width:100%;border:1px solid var(--line);border-radius:12px;padding:10px 12px;font-size:14px;background:#fff}
    textarea{min-height:90px}
    .btn{border:1px solid var(--line);background:#fff;border-radius:12px;padding:9px 12px;cursor:pointer;font-weight:800}
    .btn:hover{border-color:#cbd5e1}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .out{border:1px dashed #d1d5db;border-radius:12px;padding:10px 12px;background:#f8fafc;word-break:break-all}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .muted{color:#94a3b8;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Link Maker PRO v2 (세로)</h1>
    <p class="lead">요청사항만 추가: <b>짧은 단축 URL</b>, <b>폰트 출처 자동</b>.</p>

    <div class="card">
      <label>기본 페이지</label>
      <select id="base" class="select">
        <option value="/its-okay/">/its-okay/ (한글사랑)</option>
        <option value="/its-okay/healing/">/its-okay/healing/ (힐링메세지)</option>
      </select>

      <label>한글(ko)</label>
      <input id="ko" class="input" placeholder="예) 감사해">

      <label>로마자(roman, 하이픈)</label>
      <input id="roman" class="input" placeholder="예) gam-sa-hae">

      <label>영문(en)</label>
      <input id="en" class="input" placeholder="예) THANK YOU">

      <div class="row" style="margin-top:10px">
        <button id="buildUrl" class="btn">URL 생성</button>
        <button id="copyUrl" class="btn">URL 복사</button>
        <a id="openUrl" class="btn" target="_blank" href="#">새 창에서 열기</a>
      </div>
      <div id="urlOut" class="out mono" style="margin-top:10px"></div>
    </div>

    <div class="card">
      <h3 style="margin:0 0 6px">단축 URL 만들기 (정적 리디렉트)</h3>
      <label>슬러그(slug)</label>
      <div class="row">
        <input id="slug" class="input" style="flex:1" placeholder="예) ty">
        <button id="autoSlug" class="btn">자동 생성</button>
      </div>
      <p class="muted">Bitly처럼 짧게: <b>2~4자</b> 추천 (Base62 0-9a-zA-Z).</p>

      <label>리디렉트할 원본 URL</label>
      <input id="target" class="input mono" placeholder="위에서 생성하면 자동 입력됩니다.">

      <div class="row" style="margin-top:10px">
        <button id="dlRedirect" class="btn">리디렉트 파일 다운로드</button>
        <button id="copyShort" class="btn">짧은 URL 복사</button>
      </div>
      <div id="shortOut" class="out mono" style="margin-top:10px"></div>
      <p class="muted">/go/슬러그.html 로 업로드하면 https://inspire-wood.github.io/go/슬러그 로 접속됩니다.</p>
    </div>

    <div class="card">
      <h3 style="margin:0 0 6px">폰트 출처 자동</h3>
      <label>폰트 이름</label>
      <input id="fontName" class="input" placeholder="예) 안동엄마까투리체 / Andong Eomma Katuri">
      <label>출처(KR)</label>
      <textarea id="creditKr" class="input" placeholder="한국어 출처 문구"></textarea>
      <label>Credit (EN)</label>
      <textarea id="creditEn" class="input" placeholder="English credit text"></textarea>
      <p class="muted">입력 시 자동으로 채워지며, 직접 수정 가능.</p>
    </div>

    <p class="muted">© Inspire Wood — Link Maker PRO v2</p>
  </div>

  <script>
    const $=s=>document.querySelector(s);
    const baseHost='https://inspire-wood.github.io';

    // 1) URL 생성
    function buildUrl(){
      const base=$('#base').value;
      const ko=$('#ko').value.trim();
      const roman=$('#roman').value.trim();
      const en=$('#en').value.trim();
      const p=new URL(base, baseHost);
      if(base.endsWith('/healing/')){
        if(ko) p.searchParams.set('name', ko);
        p.searchParams.set('mode','daily');
      }else{
        if(ko) p.searchParams.set('ko', ko);
        if(roman) p.searchParams.set('roman', roman);
        if(en) p.searchParams.set('en', en);
      }
      $('#urlOut').textContent=p.toString();
      $('#openUrl').href=p.toString();
      $('#target').value=p.toString();
      return p.toString();
    }
    $('#buildUrl').onclick=buildUrl;
    $('#copyUrl').onclick=()=>{const t=$('#urlOut').textContent;if(!t){alert('먼저 URL 생성');return;}navigator.clipboard.writeText(t);};

    // 2) 단축 URL
    const alphabet="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    function randSlug(n=3){let s='';for(let i=0;i<n;i++)s+=alphabet[Math.floor(Math.random()*alphabet.length)];return s;}
    $('#autoSlug').onclick=()=>{const len=2+Math.floor(Math.random()*3);$('#slug').value=randSlug(len);showShort();};
    function shortUrl(){const s=$('#slug').value.trim();if(!s)return'';return `${baseHost}/go/${encodeURIComponent(s)}`;}
    function redirectHtml(target){
      const esc=target.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
      return `<!doctype html><meta charset="utf-8"><meta http-equiv="refresh" content="0;url=${esc}"><link rel="canonical" href="${esc}"><title>Redirecting…</title>`;
    }
    function showShort(){const s=shortUrl();if(!s)return;$('#shortOut').textContent=s;}
    $('#slug').oninput=showShort;
    $('#dlRedirect').onclick=()=>{
      const s=$('#slug').value.trim(); if(!s) return alert('슬러그를 입력하세요.');
      const t=$('#target').value.trim()||buildUrl(); if(!t) return alert('리디렉트 대상 URL이 필요합니다.');
      const blob=new Blob([redirectHtml(t)],{type:'text/html'}); const a=document.createElement('a');
      a.href=URL.createObjectURL(blob); a.download=`${s}.html`; a.click(); showShort();
    };
    $('#copyShort').onclick=()=>{const s=shortUrl(); if(!s) return alert('슬러그를 입력하세요.'); navigator.clipboard.writeText(s);};

    // 3) 폰트 출처 자동
    const FONT_CREDITS={
      "안동엄마까투리체":{
        kr:"출처: 안동엄마까투리체 — 안동시, 공유마당(한국저작권위원회), 공공누리 제1유형(출처표시).",
        en:"Font: Andong Eomma Katuri — Andong City, via Share-Madang (KOGL Type 1: Attribution)."
      },
      "Andong Eomma Katuri":{
        kr:"출처: 안동엄마까투리체 — 안동시, 공유마당(한국저작권위원회), 공공누리 제1유형(출처표시).",
        en:"Font: Andong Eomma Katuri — Andong City, via Share-Madang (KOGL Type 1: Attribution)."
      }
    };
    function tryFillCredit(){
      const name=$('#fontName').value.trim();
      const hit=FONT_CREDITS[name];
      if(hit){
        if(!$('#creditKr').value.trim()) $('#creditKr').value=hit.kr;
        if(!$('#creditEn').value.trim()) $('#creditEn').value=hit.en;
      }
    }
    $('#fontName').addEventListener('change', tryFillCredit);
    $('#fontName').addEventListener('blur', tryFillCredit);
  </script>
</body>
</html>
