<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Healing Message — K-Mood Hangeul Sign</title>
  <meta name="description" content="Personalize a name and a healing note, or use daily mode.">
  <link rel="icon" href="/its-okay/assets/icons/favicon.ico">
  <link rel="apple-touch-icon" href="/its-okay/assets/icons/apple-touch-icon-180.png" sizes="180x180">
  <style>
    :root{--bg:#f8f5f2;--ink:#111;--muted:#6b7280;--card:#fff}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Helvetica,Arial,sans-serif}
    .wrap{max-width:900px;margin:40px auto;padding:24px}
    .card{background:#fff;border-radius:18px;box-shadow:0 6px 24px rgba(0,0,0,.08);padding:28px}
    h1{font-size:clamp(26px,4vw,36px);margin:.2em 0 .4em}
    .to{font-weight:700;margin-top:6px}
    .msg{font-weight:900;font-size:clamp(36px,7vw,60px);letter-spacing:-.02em;margin:.4em 0 .2em}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .button{border:1px solid #e5e7eb;background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer;font-weight:700;text-decoration:none;color:#111;display:inline-flex;align-items:center;justify-content:center}
    .button:hover{border-color:#cbd5e1}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin:.5rem 0}
    input{border:1px solid #e5e7eb;border-radius:12px;padding:10px 12px;min-width:220px}
    .footer{margin-top:24px;color:#6b7280;font-size:13px;text-align:center}
    .small{font-size:12px;color:#6b7280}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Healing Message</h1>
      <div class="row">
        <div><label for="name">To</label><br/><input id="name" placeholder="Grace"/></div>
        <div><label for="msg">Message (optional)</label><br/><input id="msg" placeholder="It's okay."/></div>
      </div>
      <div class="to" id="toOut">To. Grace</div>
      <div class="msg" id="msgOut">It's okay.</div>
      <div class="btns">
        <button id="speakKo" class="button">Play TTS (KO)</button>
        <button id="speakEn" class="button">Play TTS (EN)</button>
        <a class="button" href="../tools/">Open Tools Dashboard</a>
      </div>
      <p class="small">Add <code>?name=Grace&mode=daily</code> for daily message rotation. Or set <code>?msg=...</code>.</p>
    </div>
    <p class="footer">© Inspire Wood — K-Mood Hangeul Sign</p>
  </div>
  <script>
    function qs(k){ return new URL(location.href).searchParams.get(k) || ''; }
    function speak(text, lang){ if(!('speechSynthesis' in window)){ alert('TTS not supported'); return; } window.speechSynthesis.cancel(); const u=new SpeechSynthesisUtterance(text); u.lang=lang; u.rate = 1; u.pitch = 1; speechSynthesis.speak(u); }
    const MESSAGES = [
      {ko:'괜찮아', en:"It's okay"},
      {ko:'고마워', en:'Thank you'},
      {ko:'사랑해', en:'I love you'},
      {ko:'오늘도 수고했어', en:'You did well today'},
      {ko:'숨 한번 크게 쉬어요', en:'Take a deep breath'},
      {ko:'너는 충분해', en:'You are enough'},
      {ko:'기다릴게', en:'I will wait for you'},
      {ko:'천천히 가도 돼', en:"It's okay to go slow"}
    ];
    function dailyPick(){ const d=new Date(); const seed=d.getFullYear()*372+(d.getMonth()+1)*31+d.getDate(); return MESSAGES[seed % MESSAGES.length]; }
    const nameIn=document.getElementById('name'), msgIn=document.getElementById('msg'), toOut=document.getElementById('toOut'), msgOut=document.getElementById('msgOut');
    function render(){
      const name=nameIn.value.trim()||'Grace'; let msg=msgIn.value.trim(); const mode=(qs('mode')||'').toLowerCase();
      if(!msg){ msg = (mode==='daily') ? (dailyPick().ko + ' / ' + dailyPick().en) : (qs('msg') || "It's okay."); }
      toOut.textContent='To. '+name; msgOut.textContent=msg;
    }
    nameIn.value=qs('name')||'Grace'; msgIn.value=qs('msg')||''; render();
    nameIn.addEventListener('input', render); msgIn.addEventListener('input', render);
    document.getElementById('speakKo').addEventListener('click', ()=>speak(msgOut.textContent,'ko-KR'));
    document.getElementById('speakEn').addEventListener('click', ()=>speak(msgOut.textContent,'en-US'));
  </script>
</body>
</html>
